## 좋은 URI 설계란?
### 가장 중요한 것은 리소스 식별
API를 설계할 때는 **리소스를 식별**해야 한다.
**리소스**와 리소스를 어떻게 할건지 **행위**를 분리해야 한다.
	- 리소스: 회원
	- 행위: 조회, 등록, 삭제, 변경

이 분리를 위해 HTTP메서드를 사용한다.

## HTTP 메서드 종류
### 주요 메서드
- `GET`
	리소스 조회
- `POST` 
	요청 데이터 처리, 주로 등록에 사용
- `PUT`
	리소스 대체, 해당 리소스가 없으면 생성
- `PATCH`
	리소스 부분 변경
- `DELETE`
	리소스 삭제

### 기타 메서드
- `HEAD`: GET과 동일하지만 메시지 부분을 제외하고, 상태 줄과 헤더만 반환 
- `OPTIONS`: 대상 리소스에 대한 통신 가능 옵션(메서드)을 설명(주로 CORS에서 사용) 
- `CONNECT`: 대상 자원으로 식별되는 서버에 대한 터널을 설정 
- `TRACE`: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

## GET, POST
### GET
```
GET /members/100 HTTP/1.1 
Host: localhost:8080
```
- **리소스 조회**
- 서버에 전달하고 싶은 데이터는 query parameter를 통해 전달
- 메시지 바디로 데이터 전달하는 것은 권장하지 않는다.

### POST
```
POST /members HTTP/1.1 
Content-Type: application/json 
{ 
	"username": "hello",
	"age": 20 
}
```
- 서버는 받은 요청 **데이터**를 **처리**
- 메시지 바디를 통해 서버로 요청 데이터를 전달
- 주로 **신규 리소스 등록, 프로세스 처리**에 사용

## PUT, PATCH, DELETE
### PUT
```
PUT /members/100 HTTP/1.1 
Content-Type: application/json 
{ 
	"username": "hello",
	"age": 20 
}
```
- 리소스가 **있으면 대체, 없으면 생성**
- 쉽게 이야기 해서 **덮어버린다**.

**POST와 차이점**
PUT은 특정 리소스를 대체하는 것이므로 리소스를 식별한다.

> [!CAUTION] 주의점! 리소스를 완전히 대체한다.
> 기존에 아래와 같은 리소스에서
> ```
> { 
> "username": "hello",
> "age": 20 
> }
> ```
> 아래 데이터로 PUT 하게 되면 username 필드가 사라진다.
> age만 부분적으로 바꾸고 싶다면 `PATCH`를 사용해야 한다.
> ```
> { 
> "age":50 
> }
> ```

### PATCH
- 리소스 부분 변경
```
{ 
	"username": "hello",
	"age": 20 
}
```
기존 리소스에 아 래처럼 PATCH하면
```
PATCH /members/100 HTTP/1.1 
Content-Type: application/json 
{ 
	"age": 50 
}
```
age만 바뀐다
```
{ 
	"username": "hello",
	"age": 50 
}
```

### DELETE
```
DELETE /members/100 HTTP/1.1 
Host: localhost:8080
```
- 리소스 제거

## HTTP 메서드의 속성
### 안전(Safe Methods)
![[4. HTTP 메서드-20240408142259348.webp]]
호출해도 리소스를 변경하지 않는다는 말이다.
`GET`은 조회만 하기 때문에 안전하다.
`POST`, `PUT`, `DELETE` 처럼 변경이 있는 것들은 당연히 안전하지 않다.

### 멱등(Idempotent Methods)
한 번 호출하든 두 번 호출하든 100번 호출하든 결과가 동일하다.
- `GET`: 한 번 조회하든, 두 번 조회하든 같은 결과가 조회된다.
- `PUT`: 결과를 대체한다. 따라서 같은 요청을 여러번 해도 최종 결과는 같다. 
- `DELETE`: 결과를 삭제한다. 같은 요청을 여러번 해도 삭제된 결과는 똑같다. 
- `POST`: **멱등이 아니다!** 두 번 호출하면 같은 결제가 중복해서 발생할 수 있다.

### 캐시가능(Cacheable Methods)
**응답 결과 리소스를 캐시해서 사용하는 것**
예를 들어  어떤 이미지를 요청하는데 캐시를 사용하면 요청을 보낼때마다 이미지를 다운로드 받지 않아도 된다.
실제로는 `GET`정도만  딱 URL만 키로 잡고 사용하면 되기 때문에 캐시로 사용한다