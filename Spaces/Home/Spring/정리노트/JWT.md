![[kakao_login.excalidraw]]

## JWT란?
JWT는 Json Web Token의 약자로, 인증 정보를 담은 토큰이다. 주로 서버와 클라이언트 간의 통신에서 사용되며, 세션 방식과 함께 현대 웹 개발에서 널리 사용되는 인증 방식이다.

### JWT를 택배에 비유하면?
#### Payload
택배 안에 들어갈 물건으로, JWT의 "내용"이다. 예를 들어, 사용자 이름이나 역할 같은 데이터를 담는다.

#### Header
어떤 박스로 포장할지에 대한 정보로, JWT에서 사용하는 암호화 알고리즘에 관한 정보를 담는다.

#### Signature
송장처럼 발신자가 누구인지 명확히 작성하는 부분이다.


### JWT의 핵심 요소
#### Header
토큰 유형과 암호화 알고리즘 정보

#### Payload
전송하고자 하는 데이터들 (Claims, 주장)

#### Signature
데이터 무결성을 보장하는 암호화 서명


이 세 가지 요소는 각각 Base64로 인코딩되고, `.`으로 연결되어 하나의 긴 문자열 형태로 반환된다.

  
### JWT의 장점과 주의점
#### **장점**
- 서버가 인증 상태를 저장하지 않아도 되는 Stateless 인증
- 분산 환경에서의 높은 확장성

#### **주의사항**
- JWT는 인코딩된 값이지 암호화된 값이 아니다. 따라서 민감한 정보를 담아서는 안 된다.
- 토큰 만료 시간(`exp`)을 반드시 설정해야 한다.


### JWT 발급과 인증 로직 정리
1️⃣ 클라이언트가 로그인 요청

2️⃣ 서버가 사용자 인증 후 JWT 발급

3️⃣ 클라이언트는 JWT를 저장 (예: Local Storage)

4️⃣ 이후 요청마다 JWT를 포함하여 서버와 통신

5️⃣ 서버는 토큰 무결성 검증 후 응답


## JWT 토큰과 세션의 차이점

### 1. 인증 상태 관리
#### JWT 토큰
서버가 인증 상태를 저장하지 않는 Stateless 방식이다. 
모든 인증 정보는 클라이언트가 보유한 토큰에 포함되어 있어 서버는 이를 검증만 하면 된다.

#### 세션
서버가 사용자의 인증 상태를 저장하는 Stateful 방식이다. 
서버 메모리나 데이터베이스에 사용자의 세션 정보가 저장되며, 클라이언트는 세션 ID를 통해 자신의 인증 상태를 확인받는다.

### 2. 확장성

#### JWT 토큰
서버가 인증 상태를 저장하지 않으므로 분산 서버 환경이나 클라우드 기반의 수평적 확장(Horizontal Scaling)에 적합하다.

####  세션
인증 상태가 서버에 저장되므로 서버 확장 시 세션 데이터의 동기화가 필요하다. 
이를 위해 추가적인 설정(Redis 같은 세션 저장소)이 필요하다.

### 3. 보안성
#### JWT 토큰
토큰 자체가 정보와 서명을 포함하고 있어 서버 간에 인증 상태를 공유할 필요가 없다. 하지만 탈취 시 만료 시간 전까지 사용할 수 있으므로 민감한 정보는 포함해서는 안 된다.

#### 세션
세션 ID만으로 인증을 관리하며, 인증 데이터는 서버에 저장된다. 세션 ID가 탈취되어도 서버에서 세션을 무효화할 수 있다.