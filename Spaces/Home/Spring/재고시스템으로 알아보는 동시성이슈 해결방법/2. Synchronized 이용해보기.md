
트랜잭션은 서비스를 하나 더 만들어서 실행한다.


### 문제점
Java의 Synchronized는 한 프로세스 안에서만 보장이 된다.
![[Pasted image 20250222231253.png]]
서버가 1대일 때는 데이터의 접근을 1대만 해서 괜찮겠지만, 2대 이상일 경우에는 여러 서버에서 데이터에 접근할 수 있게 된다.

![[Pasted image 20250222231310.png]]
예를 들어 서버 1에서 10시에 재고감소 로직을 시작하고, 10시 5분에 종료하게 된다고 가정해보자.
그럼 서버 2에서 10시~10시 5분 사이에 갱신되지 않은 재고를 가져가서 새로운 값으로 갱신할 수 있게 된다.

즉, `Synchronized`는 각 프로세스 안에서만 보장이 되기 때문에 결국 여러 스레드에서 동시에 데이터에 접근 할 수 있게 되면서 Race Condition이 발생하게 되는 것!

실제 운영 중인 서비스는 대부분 2대 이상의 서버를 사용하기 때문에 `Synchronized` 방법은 거의 사용되지 않는다.
