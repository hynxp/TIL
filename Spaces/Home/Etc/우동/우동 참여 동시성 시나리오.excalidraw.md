---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
1. synchronized
현재는 단일 WAS, DB기 때문에 괜찮을 것 같지만 추후 확장성을 위해 PASS

2. 비관적 락(Pessimistic Lock)
충돌이 많을 것으로 예상하여 비관적 락을 사용한다.
but! 분산 DB일 경우에는 한 DB에서 락을 걸어도 다른 DB에서 변경이 가능함
-> DB의 커넥션 풀이 고갈될수도 있고, DB에 부하가 감

3. 분산 DB를 가정하고 redis 분산 락을 적용한다.
    A.Lettuce
    -> 분산락을 지원하지 않아, 락을 획득할 때까지 반복해서 redis에 요청해 부하up
    B.Redisson
       ->pub/sub형태로 락을 획득한 스레드에서 자신이 점유하고 있는 락을 해제할 때 
        채널에 메시지를 보내줌으로써 락을 획득해야 하는 스레드들에게 락 획득을 하라고 전달
but! 타임아웃 이슈로 순서가 지켜지지 않음

4. FIFO Queue + 뭐지...??


 ^CcQ63cUL

## Embedded Files
a9b9288dbe294dacf19eead66403a5359cad6312: [[IMG-20250306014108731.png]]

%%
## Drawing
```compressed-json
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=
```
%%